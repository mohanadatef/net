#pragma checksum "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "4b7d909bb351a984c5ffc5a71f60c79564de2443"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Chat_Messages), @"mvc.1.0.view", @"/Views/Chat/Messages.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\_ViewImports.cshtml"
using KhadimiEssa;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\_ViewImports.cshtml"
using KhadimiEssa.Models;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"4b7d909bb351a984c5ffc5a71f60c79564de2443", @"/Views/Chat/Messages.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"7382dd3c129ccafb293208743c1af92e67834108", @"/Views/_ViewImports.cshtml")]
    #nullable restore
    public class Views_Chat_Messages : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<IEnumerable<KhadimiEssa.Models.ChatModels.SiteMessagesViewModel>>
    #nullable disable
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("src", new global::Microsoft.AspNetCore.Html.HtmlString("~/ChatSite/imgs/paner.jpg"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("src", new global::Microsoft.AspNetCore.Html.HtmlString("~/Site/recorder/recorder.js"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_2 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("src", new global::Microsoft.AspNetCore.Html.HtmlString("~/js/signalr/dist/browser/signalr.js"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        #pragma warning restore 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral("\r\n");
#nullable restore
#line 3 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
  
    Layout = "/Views/Shared/_ChatSiteLayout.cshtml";
    ViewData["Title"] = "Messages";

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n<div class=\"body-content\">\r\n\r\n    <div class=\"the_baner\">\r\n        ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("img", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagOnly, "4b7d909bb351a984c5ffc5a71f60c79564de24434593", async() => {
            }
            );
            __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_0);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n        <h5>تفاصيل المحادثة طلب رقم ");
#nullable restore
#line 12 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
                               Write(Model.FirstOrDefault().orderNumber);

#line default
#line hidden
#nullable disable
            WriteLiteral("</h5>\r\n    </div>\r\n\r\n\r\n    <div class=\"sec-marg\">\r\n\r\n        <div class=\"container\">\r\n\r\n            <div class=\"body_chat p-15\">\r\n\r\n                <div class=\"chat-content over_scroll_chat height_chat\">\r\n\r\n");
#nullable restore
#line 24 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
                     foreach (var item in Model)
                    {
                        if (item.sender)
                        {

#line default
#line hidden
#nullable disable
            WriteLiteral("                            <div class=\"sent_chat content_sent\">\r\n                                <img");
            BeginWriteAttribute("src", " src=\"", 803, "\"", 824, 1);
#nullable restore
#line 29 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
WriteAttributeValue("", 809, item.senderImg, 809, 15, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(">\r\n                                <div class=\"sent\">\r\n");
#nullable restore
#line 31 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
                                     if (item.type == (int)KhadimiEssa.Enums.AllEnums.FileTypeChat.img)
                                    {
                                        

#line default
#line hidden
#nullable disable
            WriteLiteral("                                        <p><a data-fancybox=\"gallery\"");
            BeginWriteAttribute("href", " href=\"", 1175, "\"", 1195, 1);
#nullable restore
#line 34 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
WriteAttributeValue("", 1182, item.message, 1182, 13, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral("><img");
            BeginWriteAttribute("src", " src=\"", 1201, "\"", 1220, 1);
#nullable restore
#line 34 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
WriteAttributeValue("", 1207, item.message, 1207, 13, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral("></a></p>\r\n");
#nullable restore
#line 35 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"

                                    }
                                    else if (item.type == (int)KhadimiEssa.Enums.AllEnums.FileTypeChat.audio)
                                    {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                        <p>\r\n                                            <audio controls>\r\n                                                <source");
            BeginWriteAttribute("src", " src=\"", 1585, "\"", 1604, 1);
#nullable restore
#line 41 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
WriteAttributeValue("", 1591, item.message, 1591, 13, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" type=\"audio/ogg\">\r\n                                                <source");
            BeginWriteAttribute("src", " src=\"", 1680, "\"", 1699, 1);
#nullable restore
#line 42 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
WriteAttributeValue("", 1686, item.message, 1686, 13, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" type=\"audio/mpeg\">\r\n                                                Your browser does not support the audio element.\r\n                                            </audio>\r\n                                        </p>\r\n");
#nullable restore
#line 46 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
                                    }
                                    else if (item.type == (int)KhadimiEssa.Enums.AllEnums.FileTypeChat.file)
                                    {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                        <p> ");
#nullable restore
#line 49 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
                                       Write(item.message);

#line default
#line hidden
#nullable disable
            WriteLiteral(" </p>\r\n");
#nullable restore
#line 50 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
                                    }
                                    else
                                    {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                        <p> ");
#nullable restore
#line 53 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
                                       Write(item.message);

#line default
#line hidden
#nullable disable
            WriteLiteral(" </p>\r\n");
#nullable restore
#line 54 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
                                    }

#line default
#line hidden
#nullable disable
            WriteLiteral("                                    <div class=\"d-flex justify-content-end\">\r\n                                        <span class=\"font_12 M_H_10\"> ");
#nullable restore
#line 56 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
                                                                 Write(item.date);

#line default
#line hidden
#nullable disable
            WriteLiteral(" </span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n");
#nullable restore
#line 60 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
                        }
                        else
                        {

#line default
#line hidden
#nullable disable
            WriteLiteral("                            <div class=\"sent_chat content_receive\">\r\n                                <img");
            BeginWriteAttribute("src", " src=\"", 2871, "\"", 2892, 1);
#nullable restore
#line 64 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
WriteAttributeValue("", 2877, item.senderImg, 2877, 15, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(">\r\n                                <div class=\"receive\">\r\n");
#nullable restore
#line 66 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
                                     if (item.type == (int)KhadimiEssa.Enums.AllEnums.FileTypeChat.img)
                                    {
                                        

#line default
#line hidden
#nullable disable
            WriteLiteral("                                        <p><a data-fancybox=\"gallery\"");
            BeginWriteAttribute("href", " href=\"", 3246, "\"", 3266, 1);
#nullable restore
#line 69 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
WriteAttributeValue("", 3253, item.message, 3253, 13, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral("><img");
            BeginWriteAttribute("src", " src=\"", 3272, "\"", 3291, 1);
#nullable restore
#line 69 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
WriteAttributeValue("", 3278, item.message, 3278, 13, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral("></a></p>\r\n");
#nullable restore
#line 70 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
                                    }
                                    else if (item.type == (int)KhadimiEssa.Enums.AllEnums.FileTypeChat.audio)
                                    {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                        <p>\r\n                                            <audio controls>\r\n                                                <source");
            BeginWriteAttribute("src", " src=\"", 3654, "\"", 3673, 1);
#nullable restore
#line 75 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
WriteAttributeValue("", 3660, item.message, 3660, 13, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" type=\"audio/ogg\">\r\n                                                <source");
            BeginWriteAttribute("src", " src=\"", 3749, "\"", 3768, 1);
#nullable restore
#line 76 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
WriteAttributeValue("", 3755, item.message, 3755, 13, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" type=\"audio/mpeg\">\r\n                                                Your browser does not support the audio element.\r\n                                            </audio>\r\n                                        </p>\r\n");
#nullable restore
#line 80 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
                                    }
                                    else if (item.type == (int)KhadimiEssa.Enums.AllEnums.FileTypeChat.file)
                                    {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                        <p> ");
#nullable restore
#line 83 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
                                       Write(item.message);

#line default
#line hidden
#nullable disable
            WriteLiteral(" </p>\r\n");
#nullable restore
#line 84 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
                                    }
                                    else
                                    {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                        <p> ");
#nullable restore
#line 87 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
                                       Write(item.message);

#line default
#line hidden
#nullable disable
            WriteLiteral(" </p>\r\n");
#nullable restore
#line 88 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
                                    }

#line default
#line hidden
#nullable disable
            WriteLiteral("                                    <div class=\"d-flex\">\r\n                                        <span class=\"font_12\"> ");
#nullable restore
#line 90 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
                                                          Write(item.date);

#line default
#line hidden
#nullable disable
            WriteLiteral(" </span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n");
#nullable restore
#line 94 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
                        }
                    }

#line default
#line hidden
#nullable disable
            WriteLiteral(@"

                </div>

                <div class=""writ_massage"">

                    <div class=""d-flex"">

                        <div class=""form d-flex flex-grow-1"">
                            <textarea id=""messageInput"" class=""form-control input-custom-size"" type=""text"" placeholder=""اكتب هنا""></textarea>
                            <button");
            BeginWriteAttribute("onclick", " onclick=\"", 5135, "\"", 5235, 3);
            WriteAttributeValue("", 5145, "sendMessage($(\'#messageInput\').val(),", 5145, 37, true);
#nullable restore
#line 106 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
WriteAttributeValue("", 5182, (int)KhadimiEssa.Enums.AllEnums.FileTypeChat.text, 5182, 52, false);

#line default
#line hidden
#nullable disable
            WriteAttributeValue("", 5234, ")", 5234, 1, true);
            EndWriteAttribute();
            BeginWriteAttribute("class", " class=\"", 5236, "\"", 5244, 0);
            EndWriteAttribute();
            WriteLiteral(" type=\"button\">\r\n                                ارسال\r\n                            </button>\r\n                        </div>\r\n\r\n                        <div class=\"send_sound_chat\">\r\n");
            WriteLiteral(@"                            <i class=""fas fa-microphone"" id=""recordButton""></i>
                            <i class=""fas fa-times-circle"" id=""stopButton"" hidden></i>
                            <i class=""fas fa-microphone"" id=""pauseButton"" hidden></i>
                        </div>

                        <div class=""send_img_chat"">
                            <input type=""file"" id=""sendimagechat"" accept=""image/*"">
                            <i class=""fa fa-camera"" aria-hidden=""true""></i>
                        </div>

                    </div>

                    <div class=""the_img_befor_send d-flex"">
");
            WriteLiteral(@"                    </div>
                    <div class=""the_record_befor_send d-flex"">
                        <div id=""formats"" hidden>Format: start recording to see sample rate</div>
                        <p hidden><strong>Recordings:</strong></p>
                        <ul id=""recordingsList""></ul>
                    </div>

                </div>

            </div>

        </div>
    </div>

</div>



");
            DefineSection("Scripts", async() => {
                WriteLiteral("\r\n\r\n    ");
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("script", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "4b7d909bb351a984c5ffc5a71f60c79564de244319706", async() => {
                }
                );
                __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_1);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                WriteLiteral("\r\n");
                WriteLiteral("\r\n    ");
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("script", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "4b7d909bb351a984c5ffc5a71f60c79564de244320845", async() => {
                }
                );
                __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_2);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                WriteLiteral(@"

    <script>

        window.onload = function () {

            $(""html, body"").animate({ scrollTop: $("".body_chat"").offset().top });
        }

        $(document).ready(function () {

            $("".chat-content"").animate({
                scrollTop: $('.chat-content').prop(""scrollHeight"")
            }, 100);

            //$(""html"").animate({ scrollTop: $("".height_chat"").offset().top });
            //$('.writ_massage .form').on('submit', function (event) {
            //    event.preventDefault();
            //    var message = $('.content_sent').first().clone();
            //    message.find('p').text($('.input-custom-size').val());
            //    message.appendTo('.chat-content');
            //    $('.input-custom-size').val('');

            //    $("".chat-content"").animate({
            //        scrollTop: $('.chat-content').prop(""scrollHeight"")
            //    }, 1000);

            //});


            //$(""#sendimagechat"").change(function (event) {
      ");
                WriteLiteral(@"      //    var messageimg = $('.content_sent').first().clone();
            //    messageimg.find('p').html('<img src=""' + URL.createObjectURL(event.target.files[0]) + '"">');
            //    messageimg.appendTo('.chat-content');
            //    $("".chat-content"").animate({
            //        scrollTop: $('.chat-content').prop(""scrollHeight"")
            //    }, 1000);

            //});

        });


    </script>

    <script>


        var connection = new signalR.HubConnectionBuilder().withUrl(""/chatHub"").build();

        connection.on(""receiveMessage"", function (message) {


            //debugger;
            //var html = `
            //                <div class=""sent_chat content_receive"">
            //                    <img src=""${message.senderImg}"">
            //                    <div class=""receive"">
            //                            <p> ${message.message} </p>
            //                        <div class=""d-flex"">
            //           ");
                WriteLiteral(@"                 <span class=""font_12""> ${message.date} </span>
            //                        </div>
            //                    </div>
            //                </div>
            //            `;
            //$('.chat-content').append(html);
            //$("".chat-content"").animate({
            //    scrollTop: $('.chat-content').prop(""scrollHeight"")
            //}, 100);

            if (message.orderId == ");
#nullable restore
#line 227 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
                              Write(ViewBag.id);

#line default
#line hidden
#nullable disable
                WriteLiteral(") {\r\n\r\n                if (message.type == ");
#nullable restore
#line 229 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
                                Write((int)KhadimiEssa.Enums.AllEnums.FileTypeChat.img);

#line default
#line hidden
#nullable disable
                WriteLiteral(@") {
                    var html = `
                            <div class=""sent_chat content_receive"">
                                <img src=""${message.senderImg}"">
                                <div class=""sent"">
                                <p><a data-fancybox=""gallery"" href=""${message.message}""><img src=""${message.message}""></a></p>
                                    <div class=""d-flex justify-content-end"">
                                        <span class=""font_12 M_H_10""> ${message.date} </span>
                                    </div>
                                </div>
                            </div>
                        `;
                    $('.chat-content').append(html);
                    $("".chat-content"").animate({
                        scrollTop: $('.chat-content').prop(""scrollHeight"")
                    }, 100);
                } else if (message.type == ");
#nullable restore
#line 245 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
                                       Write((int)KhadimiEssa.Enums.AllEnums.FileTypeChat.audio);

#line default
#line hidden
#nullable disable
                WriteLiteral(@") {

                    var html = `
                            <div class=""sent_chat content_receive"">
                                <img src=""${message.senderImg}"">
                                <div class=""sent"">
                                        <p>
                                            <audio controls>
                                              <source src=""${message.message}"" type=""audio/ogg"">
                                              <source src=""${message.message}"" type=""audio/mpeg"">
                                            Your browser does not support the audio element.
                                            </audio>
                                        </p>
                                    <div class=""d-flex justify-content-end"">
                                        <span class=""font_12 M_H_10""> ${message.date} </span>
                                    </div>
                                </div>
                            </div>
     ");
                WriteLiteral(@"                   `;

                    $('.chat-content').append(html);
                    $("".chat-content"").animate({
                        scrollTop: $('.chat-content').prop(""scrollHeight"")
                    }, 100);

                } else {
                    var html = `
                            <div class=""sent_chat content_receive"">
                                <img src=""${message.senderImg}"">
                                <div class=""sent"">
                                        <p> ${message.message} </p>
                                    <div class=""d-flex justify-content-end"">
                                        <span class=""font_12 M_H_10""> ${message.date} </span>
                                    </div>
                                </div>
                            </div>
                        `;
                    $('.chat-content').append(html);
                    $("".chat-content"").animate({
                        scrollTop: $('.chat-co");
                WriteLiteral(@"ntent').prop(""scrollHeight"")
                    }, 100);
                }
            }


        });




        connection.start().then(function () {


            ////////////////////////////////////////////pst

            connection.invoke(""ConnectWeb"", """);
#nullable restore
#line 300 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
                                        Write(ViewBag.senderId);

#line default
#line hidden
#nullable disable
                WriteLiteral(@""").catch(function (err) {
                return console.error(err.toString());
            });



        }).catch(function (err) {
            setTimeout(() => start(), 5000);
        });
        connection.onclose(start);

        async function start() {
            try {
                await connection.start();
                console.log(""SignalR Connected."");
            } catch (err) {
                console.log(err);
                setTimeout(start, 5000);
            }
        };


        $(""#sendimagechat"").change(function () {
            emptyAttachments();
            $("".the_img_befor_send"").html('<div class=""uploaded-block-chat""><img src=""' + URL.createObjectURL(event.target.files[0]) + '""><label class=""close""> x </label><button class=""btn_send_img""><i class=""fas fa-cloud-upload-alt""></i></button></div>');
        });





        // REMOVE IMAGE
        $('.the_img_befor_send').on('click', '.close', function () {
            $(this).parents('.uploaded-bloc");
                WriteLiteral(@"k-chat').remove();
            $('#sendimagechat').val('');
        });

        $('#recordingsList').on('click', '.remove_record', function () {
            $(this).parents('#recordingsList').empty();
        });

    $('.the_img_befor_send').on('click', '.fa-cloud-upload-alt', function () {
        var element = $(this);

        var fd = new FormData();
        var files = $('#sendimagechat')[0].files;

        // Check file selected or not
        if (files.length > 0) {
            fd.append('file', files[0]);
            $.ajax({
                url: '");
#nullable restore
#line 351 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
                 Write(Url.Action("UploadFile","Chat"));

#line default
#line hidden
#nullable disable
                WriteLiteral(@"',
                type: 'post',
                data: fd,
                contentType: false,
                processData: false,
                success: function (response) {
                    if (response.key == 1) {
                        sendMessage(response.data,");
#nullable restore
#line 358 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
                                              Write((int)KhadimiEssa.Enums.AllEnums.FileTypeChat.img);

#line default
#line hidden
#nullable disable
                WriteLiteral(@");
                    } else {
                        toastr.error('file not uploaded');
                    }
                },
            });

        }
    });


        function sendMessage(text, type) {
            if (text == """") {
                toastr.error(""لايوجد محتوى"");
                return false;
            }
            //var text = $('#messageInput').val();
            var duration = document.getElementsByClassName(""audiorec"")[0] != undefined ? parseInt(document.getElementsByClassName(""audiorec"")[0].duration) : 0;
            duration = duration != 0 ? (duration * 1000) : 0;

            $.post(""");
#nullable restore
#line 378 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
               Write(Url.Action("SendMessage", "Chat"));

#line default
#line hidden
#nullable disable
                WriteLiteral("\", { ReceiverId: \"");
#nullable restore
#line 378 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
                                                                   Write(ViewBag.receiverId);

#line default
#line hidden
#nullable disable
                WriteLiteral("\", Text: text, OrderId:");
#nullable restore
#line 378 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
                                                                                                             Write(ViewBag.id);

#line default
#line hidden
#nullable disable
                WriteLiteral(" , Type: type, Duration: duration })\r\n                .done(function (data) {\r\n\r\n                    if (data.key == 1) {\r\n                        if (type == ");
#nullable restore
#line 382 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
                                Write((int)KhadimiEssa.Enums.AllEnums.FileTypeChat.img);

#line default
#line hidden
#nullable disable
                WriteLiteral(@") {
                            emptyAttachments();
                            $('#sendimagechat').val('');

                            var html = `
                            <div class=""sent_chat content_sent"">
                                <img src=""${data.data.senderImg}"">
                                <div class=""sent"">
                                <p><a data-fancybox=""gallery"" href=""${data.data.message}""><img src=""${data.data.message}""></a></p>
                                    <div class=""d-flex justify-content-end"">
                                        <span class=""font_12 M_H_10""> ${data.data.date} </span>
                                    </div>
                                </div>
                            </div>
                        `;
                            $('.chat-content').append(html);
                            $("".chat-content"").animate({
                                scrollTop: $('.chat-content').prop(""scrollHeight"")
                       ");
                WriteLiteral("     }, 100);\r\n\r\n\r\n                        } else if (type == ");
#nullable restore
#line 403 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
                                       Write((int)KhadimiEssa.Enums.AllEnums.FileTypeChat.audio);

#line default
#line hidden
#nullable disable
                WriteLiteral(@") {
                            emptyAttachments();
                            var html = `
                            <div class=""sent_chat content_sent"">
                                <img src=""${data.data.senderImg}"">
                                <div class=""sent"">
                                        <p>
                                            <audio controls>
                                              <source src=""${data.data.message}"" type=""audio/ogg"">
                                              <source src=""${data.data.message}"" type=""audio/mpeg"">
                                            Your browser does not support the audio element.
                                            </audio>
                                        </p>
                                    <div class=""d-flex justify-content-end"">
                                        <span class=""font_12 M_H_10""> ${data.data.date} </span>
                                    </div>
                     ");
                WriteLiteral(@"           </div>
                            </div>
                        `;
                            $('.chat-content').append(html);
                            $('#messageInput').val('');
                            $("".chat-content"").animate({
                                scrollTop: $('.chat-content').prop(""scrollHeight"")
                            }, 100);

                        } else {
                            var html = `
                            <div class=""sent_chat content_sent"">
                                <img src=""${data.data.senderImg}"">
                                <div class=""sent"">
                                        <p> ${data.data.message} </p>
                                    <div class=""d-flex justify-content-end"">
                                        <span class=""font_12 M_H_10""> ${data.data.date} </span>
                                    </div>
                                </div>
                            </div>
            ");
                WriteLiteral(@"            `;
                            $('.chat-content').append(html);
                            $('#messageInput').val('');
                            $("".chat-content"").animate({
                                scrollTop: $('.chat-content').prop(""scrollHeight"")
                            }, 100);
                        }

                    } else {
                        console.log(data.msg);
                    }
                });

        }







    </script>


    <script>
    ////////////////////////////////////////////////// recored ///////////////////////////////////////////
    //webkitURL is deprecated but nevertheless
URL = window.URL || window.webkitURL;

var gumStream; 						//stream from getUserMedia()
var rec; 							//Recorder.js object
var input; 							//MediaStreamAudioSourceNode we'll be recording

// shim for AudioContext when it's not avb.
var AudioContext = window.AudioContext || window.webkitAudioContext;
var audioContext //audio con");
                WriteLiteral(@"text to help us record

var recordButton = document.getElementById(""recordButton"");
var stopButton = document.getElementById(""stopButton"");
var pauseButton = document.getElementById(""pauseButton"");

//add events to those 2 buttons
recordButton.addEventListener(""click"", startRecording);
stopButton.addEventListener(""click"", stopRecording);
pauseButton.addEventListener(""click"", pauseRecording);

function startRecording() {
	console.log(""recordButton clicked"");

	/*
		Simple constraints object, for more advanced audio features see
		https://addpipe.com/blog/audio-constraints-getusermedia/
	*/

    var constraints = { audio: true, video:false }

 	/*
    	Disable the record button until we get a success or fail from getUserMedia()
	*/

	recordButton.hidden = true;
	stopButton.hidden = false;
	pauseButton.disabled = false

	/*
    	We're using the standard promise based getUserMedia()
    	https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia
	*/

	navigator.me");
                WriteLiteral(@"diaDevices.getUserMedia(constraints).then(function(stream) {
		console.log(""getUserMedia() success, stream created, initializing Recorder.js ..."");

		/*
			create an audio context after getUserMedia is called
			sampleRate might change after getUserMedia is called, like it does on macOS when recording through AirPods
			the sampleRate defaults to the one set in your OS for your playback device

		*/
		audioContext = new AudioContext();

		//update the format
		//document.getElementById(""formats"").innerHTML=""Format: 1 channel pcm  ""+audioContext.sampleRate/1000+""kHz""

		/*  assign to gumStream for later use  */
		gumStream = stream;

		/* use the stream */
		input = audioContext.createMediaStreamSource(stream);

		/*
			Create the Recorder object and configure to record mono sound (1 channel)
			Recording 2 channels  will double the file size
		*/
		rec = new Recorder(input,{numChannels:1})

		//start the recording process
        rec.record()
        //setTimeout(function () {
  ");
                WriteLiteral(@"      //    stopRecording();
        //    console.log(""stooooooooooooooop"");
        //},60000);

		console.log(""Recording started"");

	}).catch(function(err) {
		//enable the record button if getUserMedia() fails
		recordButton.hidden = false;
		stopButton.hidden = true;
		pauseButton.hidden = true
	});
}

function pauseRecording(){
	console.log(""pauseButton clicked rec.recording="",rec.recording );
	if (rec.recording){
		//pause
		rec.stop();
		pauseButton.innerHTML=""Resume"";
	}else{
		//resume
		rec.record()
		pauseButton.innerHTML=""Pause"";

	}
}

function stopRecording() {
	console.log(""stopButton clicked"");

	//disable the stop button, enable the record too allow for new recordings
	stopButton.hidden = true;
	recordButton.hidden = false;
	pauseButton.disabled = true;

	//reset button just in case the recording is stopped while paused
	pauseButton.innerHTML=""Pause"";

	//tell the recorder to stop the recording
	rec.stop();

	//stop microphone access
	gumStream.get");
                WriteLiteral(@"AudioTracks()[0].stop();

	//create the wav blob and pass it on to createDownloadLink
	rec.exportWAV(createDownloadLink);
}

function createDownloadLink(blob) {

	var url = URL.createObjectURL(blob);
    var au = document.createElement('audio');
    au.classList.add('audiorec');
    var li = document.createElement('li');
    li.classList.add('po-R');
    var libtn = document.createElement('button');
    libtn.classList.add('remove_record');
    var libtni = document.createElement('i');
    libtni.classList.add('fas', 'fa-times');

    libtn.appendChild(libtni);
    li.appendChild(libtn);
	//var link = document.createElement('a');

	//name of .wav file to use during upload and download (without extendion)
    var filename = new Date().toISOString() + "".wav"";

	//add controls to the <audio> element
	au.controls = true;
	au.src = url;

	//save to disk link
	//link.href = url;
	//link.download = filename+"".wav""; //download forces the browser to donwload the file using the  filename");
                WriteLiteral(@"
	//link.innerHTML = ""Save to disk"";

	//add the new audio element to li
	li.appendChild(au);

	//add the filename to the li
	//li.appendChild(document.createTextNode(filename+"".wav ""))

	//add the save to disk link to li
	//li.appendChild(link);

	//upload link
	//var upload = document.createElement(`<button class=""btn_send_img""><i class=""fas fa-cloud-upload-alt""></i></button>`);
	var upload = document.createElement(`button`);
	upload.classList.add(`btn_send_record`);
	var uploadi = document.createElement(`i`);
	uploadi.classList.add('fas',`fa-cloud-upload-alt`);
	upload.appendChild(uploadi);

	//var upload = document.createElement('a');
	//upload.href=""#"";
	//upload.innerHTML = ""Upload"";
    upload.addEventListener(""click"", function (event) {
        var xhr = new XMLHttpRequest();
        xhr.onload = function (e) {
            if (this.readyState === 4) {
                console.log(""Server returned: "", e.target.responseText);
            }
        };
        var fd = new Form");
                WriteLiteral("Data();\r\n        fd.append(\"file\", blob, filename);\r\n\r\n        $.ajax({\r\n            url: \'");
#nullable restore
#line 645 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
             Write(Url.Action("UploadFile","Chat"));

#line default
#line hidden
#nullable disable
                WriteLiteral("\',\r\n            type: \'post\',\r\n            data: fd,\r\n            contentType: false,\r\n            processData: false,\r\n            success: function (response) {\r\n                if (response.key == 1) {\r\n                    sendMessage(response.data,");
#nullable restore
#line 652 "D:\AWMER\KhadimiEssa\KhadimiEssa\Views\Chat\Messages.cshtml"
                                          Write((int)KhadimiEssa.Enums.AllEnums.FileTypeChat.audio);

#line default
#line hidden
#nullable disable
                WriteLiteral(@");
                } else {
                    toastr.error('file not uploaded');
                }
            },
        });

    });

    emptyAttachments();
    $('#sendimagechat').val('');
    li.appendChild(document.createTextNode("" ""))//add a space in between
	li.appendChild(upload)//add the upload link to li

	//add the li element to the ol
	recordingsList.appendChild(li);
        }

        function emptyAttachments() {
            $(""#recordingsList"").children('li').remove();
            $("".the_img_befor_send"").empty();
        }
    </script>

");
            }
            );
        }
        #pragma warning restore 1998
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<IEnumerable<KhadimiEssa.Models.ChatModels.SiteMessagesViewModel>> Html { get; private set; } = default!;
        #nullable disable
    }
}
#pragma warning restore 1591
